<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Jacob Intro to Feminism Final</title>
  <link rel="stylesheet" href="./src/output.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Sour+Gummy:ital,wght@0,100..900;1,100..900&display=swap"
    rel="stylesheet" />
</head>
<style>
  .video-container {
    height: 100vh;
    overflow: hidden;
    position: relative;
  }

  .video {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }
  body {
    font-family: 'Sour Gummy', sans-serif;
  }

</style>

<body class="bg-black text-white font-customFont everything">
  <div class="video-container">
    <video class="video" playsinline="true" webkit-playsinline="true" preload="auto" muted="muted">
      <source src="output.mov" type="video/mp4" />
    </video>
  </div>
  <div class="flex flex-row items-center justify-center mt-[20vh]">
    <div class="flex flex-col items-center mt-[80vh]">
      <h1 class="text-white text-8xl title-text font-customFont">
        Intro to Feminism Final Project
      </h1>
      <p class="mt-16 text-3xl sub-text">By Jacob Shaul</p>
      <p class="bottom-0 absolute mb-56 animate-bounce">Scroll down!</p>
      <p class="bottom-0 absolute mb-20 text-6xl border-white border-4 rounded-xl px-4 py-4 animate-bounce">
        &darr;
      </p>
    </div>
  </div>

  <div class="mt-[40vh]">
    <div class="flex flex-row justify-center">
      <img src="./img/sleek computer.jpeg" alt="image of computer" id="computer-image"
        class="rounded-2xl border-4 border-white" />
    </div>
  </div>

  <div class="mt-[55vh]">
    <a href="./test.html">Check</a>
    <div class="w-full h-full absolute text-blue-800">
      <svg viewBox="0 0 1280 783" fill="none" xmlns="http://www.w3.org/2000/svg">
        <ellipse cx="425.5" cy="367" rx="460.5" ry="367" fill="#514F52" />
        <ellipse cx="885.5" cy="416" rx="460.5" ry="367" fill="#514F52" />
      </svg>
    </div>
    <div class="flex flex-col" id="big-code-text">
      <div class="items-start">
        <p class="text-[300px] pl-4">Technology</p>
      </div>
      <div class="justify-evenly items-center flex flex-row">
        <img src="./img/trythisimage-removebg-preview.png" alt="" class="" />
        <p class="text-6xl split-type">
          Lorem ipsum dolor sit amet, consectetur adipisicing elit. Optio ab
          laborum, cupiditate earum eos cumque minima voluptatibus modi
          quisquam vero?t
        </p>
      </div>
    </div>
  </div>

  <!-- Extra height for scrolling -->
  <div class="mt-[160vh]"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
  <script src="https://unpkg.com/lenis@1.1.16/dist/lenis.min.js"></script>
  <script src="https://unpkg.com/split-type"></script>
  <script>
    gsap.registerPlugin(ScrollTrigger);

    // gsap.set('.everything', { y: 50, opacity: 0 });

    // gsap.to('.everything', {
    //     y: 0,
    //     opacity: 1,
    //     stagger: 0.1,
    //     delay: 0.5, // Delay before animation starts
    //     duration: 1, // Animation duration
    //     ease: 'power3.out' // Easing function
    // });


    window.onbeforeunload = function () {
        window.scrollTo(0, 0);
    }

    const splitTypes = document.querySelectorAll(".split-type");

    splitTypes.forEach((char) => {
      const text = new SplitType(char, { types: "chars" });
      gsap.from(text.chars, {
        scrollTrigger: {
          trigger: char,
          start: "top 90%",
          end: "top 50%",
          scrub: true,
          markers: true, // Set to true for debugging; remove for production
        },
        opacity: 0, // Start fully invisible
        // y: 20, // Move up into position
        stagger: 0.05, // Add a slight delay between each character
        duration: 1, // Optional duration for each character's animation
      });
    });

    gsap.fromTo(
      ".title-text",
      {
        x: -300, // Start off-screen to the left
        opacity: 0, // Start invisible
      },
      {
        x: 0, // Slide into its original position
        opacity: 1, // Fade in
        duration: 1, // Animation duration (1 second)
        scrollTrigger: {
          trigger: ".title-text", // Element to watch
          start: "top 50%", // Start when title-text reaches 80% of viewport
          end: "top 30%", // End when title-text reaches 50% of viewport
          scrub: true, // Smoothly tie animation to scroll
          markers: false, // Debug markers
        },
      }
    );

    gsap.fromTo(
      "#computer-image",
      {
        scale: 0.5, // Start at normal size
      },
      {
        scale: 1.1,
        scrollTrigger: {
          trigger: "#computer-image", // Element to watch
          start: "top 60%", // Start when the image is 80% down the viewport
          end: "bottom 80%", // End when the image is 50% down the viewport
          scrub: true, // Smoothly tie animation to scroll
          markers: true, // Debug markers
        },
      }
    );

    gsap.fromTo(
      ".sub-text",
      {
        x: 300, // Start off-screen to the right
        opacity: 0, // Start invisible
      },
      {
        x: 0, // Slide into its original position
        opacity: 1, // Fade in
        duration: 1, // Animation duration (1 second)
        scrollTrigger: {
          trigger: ".sub-text", // Element to watch
          start: "bottom center", // Start when sub-text reaches 80% of viewport
          end: "305% center", // End when sub-text reaches 50% of viewport
          scrub: true, // Smoothly tie animation to scroll
          markers: false, // Debug markers
        },
      }
    );

    gsap.fromTo(
      "#big-code-text",
      {
        x: -300,
        opacity: 0,
      },
      {
        x: 0,
        opacity: 1,
        duration: 1,
        scrollTrigger: {
          trigger: "#big-code-text",
          start: "top 50%",
          end: "bottom bottom",
          scrub: true,
          markers: false,
        },
      }
    );

    // Initialize Lenis
    const lenis = new Lenis({
      autoRaf: true,
    });

    // Listen for the scroll event and log the event data
    lenis.on("scroll", (e) => {
      console.log(e);
    });

    const video = document.querySelector(".video");

    // GSAP ScrollTrigger for video playback and scrolling
    let tl = gsap.timeline({
      scrollTrigger: {
        trigger: ".video-container",
        start: "top top",
        end: "bottom+=100% top", // Allow the video section to scroll naturally
        scrub: true,
        pin: true, // Pin the video during its animation
        markers: true, // Debug markers (remove for production)
      },
    });

    // Sync video playback with scroll
    video.onloadedmetadata = function () {
      tl.to(video, { currentTime: video.duration });
    };

    // Ensure the video initializes on touch devices
    function isTouchDevice() {
      return (
        "ontouchstart" in window ||
        navigator.maxTouchPoints > 0 ||
        navigator.msMaxTouchPoints > 0
      );
    }
    if (isTouchDevice()) {
      video.play();
      video.pause();
    }
  </script>
</body>

</html>